---
import { type CollectionEntry, getCollection } from 'astro:content'
import HeaderCV from '@components/HeaderCV.astro'
import CVLayout from '@layouts/CVLayout.astro'
import Profile from '@components/Profile.astro'
import CVLink from '@components/CVLink.astro'

export async function getStaticPaths() {
  const cvs = await getCollection('cv')
  return cvs.map((cv) => ({
    params: { slug: cv.id },
    props: cv,
  }))
}
type Props = CollectionEntry<'cv'>

const cv = Astro.props
const profileData = cv.data.profileData
---

<CVLayout>
  <HeaderCV />
  <main class="flex flex-col gap-9 lg:flex-row">
    <Profile
      fullName={profileData.fullName}
      workPosition={profileData.workPosition}
      email={profileData.email}
      birthDate={profileData.birthDate}
      githubLink={profileData.githubLink}
      linkedInLink={profileData.linkedInLink}
      cvDownloadLink={profileData.cvDownloadLink}
      cellPhone={profileData.cellPhone}
    />
    <section class="flex-1 flex flex-col">
      <article class="flex justify-end" data-testid="buttons">
        <nav class="flex gap-3 px-7 py-6 bg-white/50 rounded-xl">
          <CVLink name="info" />
          <CVLink name="experience" />
          <CVLink name="contact" />
          <CVLink name="faq" />
        </nav>
      </article>
      <article
        data-testid="info-section"
        class="font-pacifico bg-white bg-opacity-50 rounded-2xl mt-6 min-h-32 p-10"
      >
        Info Section
      </article>
    </section>
  </main>
</CVLayout>
